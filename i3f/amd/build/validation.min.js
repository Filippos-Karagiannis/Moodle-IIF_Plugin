define(["jquery"],function(n){return{init:function(){document.getElementById("id_intro").addEventListener("click",function(){var a,t,e=document.getElementById("id_externalurl").value;""==e?alert("please include a IIIF link"):document.getElementById("id_language_1").checked||document.getElementById("id_language_2").checked||document.getElementById("id_language_3").checked||alert("please select a language");try{document.getElementById("id_language_1").checked&&n.getJSON(e,{lang:"en"},function(e){for(i in e.metadata)for(j in t+="<div><strong>"+e.metadata[i].label+" : </strong>",e.metadata[i].value)t+=e.metadata[i].value[j];for(i in t=t.replace(/undefined/g,""),document.getElementById("id_introeditoreditable").innerHTML=t,e.metadata)e.metadata[i].label.includes("Title")&&(a=e.metadata[i].value),e.metadata[i].label.includes("Date")&&(a+=" : "+e.metadata[i].value);document.getElementById("id_name").value=a}),document.getElementById("id_language_2").checked&&n.getJSON(e,{lang:"de"},function(e){for(i in e.metadata)for(j in t+="<div><strong>"+e.metadata[i].label+" : </strong>",e.metadata[i].value)t+=e.metadata[i].value[j];for(i in t=t.replace(/undefined/g,""),document.getElementById("id_introeditoreditable").innerHTML=t,e.metadata)e.metadata[i].label.includes("Titel")&&(a=e.metadata[i].value),e.metadata[i].label.includes("Entstehung")&&(a+=" : "+e.metadata[i].value);document.getElementById("id_name").value=a}),document.getElementById("id_language_3").checked&&n.getJSON(e,{lang:"it"},function(e){for(i in e.metadata)for(j in t+="<div><strong>"+e.metadata[i].label+" : </strong>",e.metadata[i].value)t+=e.metadata[i].value[j];for(i in t=t.replace(/undefined/g,""),document.getElementById("id_introeditoreditable").innerHTML=t,e.metadata)e.metadata[i].label.includes("Titolo")&&(a=e.metadata[i].value),e.metadata[i].label.includes("Data")&&(a+=" : "+e.metadata[i].value);document.getElementById("id_name").value=a})}catch(e){console.error("There has been a problem with your json operation:",e)}})}}});